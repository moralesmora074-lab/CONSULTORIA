<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultor√≠a CPRO | Soluciones Contables</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        /* --- ESTILOS GENERALES (Dise√±o PRO) --- */
        :root { --primary: #1e3a8a; --secondary: #3b82f6; --dark: #1f2937; --light: #f3f4f6; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; color: var(--dark); background: white; scroll-behavior: smooth; }

        /* HEADER */
        header { background: #111827; padding: 15px 0; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .nav-box { max-width: 1200px; margin: auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .logo { color: white; font-size: 1.5rem; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        nav ul { list-style: none; display: flex; gap: 20px; padding: 0; margin: 0; }
        nav a { color: #e5e7eb; text-decoration: none; font-weight: 500; transition: 0.3s; }
        nav a:hover { color: var(--secondary); }

        /* PORTADA */
        .hero { text-align: center; padding: 100px 20px; background: linear-gradient(to bottom, #eff6ff, white); }
        .hero h1 { font-size: 3rem; color: var(--primary); margin: 0 0 20px 0; }
        .hero p { font-size: 1.2rem; color: #555; max-width: 700px; margin: 0 auto 40px auto; }
        .btn-cta { background: var(--secondary); color: white; padding: 15px 40px; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1.1rem; box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3); transition: 0.3s; display: inline-block;}
        .btn-cta:hover { background: #1e40af; transform: translateY(-3px); }

        /* SECCIONES */
        .container { max-width: 1200px; margin: auto; padding: 80px 20px; }
        .title { text-align: center; margin-bottom: 50px; }
        .title h2 { font-size: 2.5rem; color: var(--primary); margin-bottom: 10px; margin-top: 0; }

        /* SERVICIOS (Actualizado seg√∫n tu imagen) */
        .grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; }
        .card { background: white; padding: 40px; border-radius: 15px; width: 320px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: left; border: 1px solid #eee; transition: 0.3s; }
        .card:hover { transform: translateY(-10px); border-top: 5px solid var(--secondary); }
        .icon { width: 60px; height: 60px; background: var(--primary); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; margin-bottom: 20px; }
        .card h3 { color: var(--primary); margin-bottom: 15px; font-size: 1.4rem; }
        .card p { color: #666; font-size: 0.95rem; line-height: 1.5; margin-bottom: 20px; }
        
        /* Listas dentro de las tarjetas */
        .service-list { list-style: none; padding: 0; margin: 0; }
        .service-list li { margin-bottom: 8px; font-size: 0.9rem; color: #444; display: flex; align-items: center; gap: 10px; }
        .check { color: #10b981; font-weight: bold; } /* Color verde check */

        /* CONTACTO */
        #contacto { background: #f9fafb; }
        .form-box { max-width: 500px; margin: auto; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 15px; text-align: left; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; font-family: inherit; }
        .btn-send { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 5px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-send:hover { background: #1e40af; }

        /* CHATBOT */
        .chat-btn { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: #25D366; color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 30px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 999; animation: bounce 2s infinite; }
        .chat-window { display: none; position: fixed; bottom: 100px; right: 30px; width: 320px; height: 400px; background: white; box-shadow: 0 5px 25px rgba(0,0,0,0.2); border-radius: 15px; flex-direction: column; overflow: hidden; z-index: 999; }
        .chat-head { background: var(--primary); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .chat-body { flex: 1; padding: 15px; background: #f0f2f5; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .chat-foot { padding: 10px; background: white; display: flex; gap: 5px; border-top: 1px solid #ddd; }
        .chat-foot input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 20px; outline: none; }
        .chat-foot button { border: none; background: none; color: var(--secondary); font-size: 20px; cursor: pointer; }
        
        .msg { padding: 8px 12px; border-radius: 10px; font-size: 14px; max-width: 80%; line-height: 1.4; }
        .bot { background: white; align-self: flex-start; border-bottom-left-radius: 0; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .user { background: #dcf8c6; align-self: flex-end; border-bottom-right-radius: 0; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
        footer { background: #111827; color: #9ca3af; text-align: center; padding: 30px; margin-top: 0; }
        @media (max-width: 768px) { .nav-box { flex-direction: column; gap: 15px; } .chat-window { width: 90%; right: 5%; bottom: 100px; } }
    </style>
</head>
<body>

    <header>
        <div class="nav-box">
            <div class="logo"><i class="fas fa-chart-line"></i> &nbsp;CPRO</div>
            <nav>
                <ul>
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#servicios">Servicios</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="hero" id="inicio">
        <h1>Transformamos tu Contabilidad</h1>
        <p>Soluciones integrales en ERP, Finanzas y Cumplimiento Tributario en Per√∫.</p>
        <a href="#contacto" class="btn-cta">Consulta Gratis</a>
    </div>

    <div class="container" id="servicios">
        <div class="title">
            <h2>Nuestros Servicios</h2>
            <p>Soluciones integrales para todas sus necesidades contables en Per√∫</p>
        </div>
        <div class="grid">
            
            <div class="card">
                <div class="icon"><i class="fas fa-calculator"></i></div>
                <h3>Contabilidad General</h3>
                <p>Gesti√≥n completa de libros contables, conciliaciones bancarias y preparaci√≥n de estados financieros seg√∫n normativa peruana.</p>
                <ul class="service-list">
                    <li><i class="fas fa-check check"></i> Libros contables actualizados</li>
                    <li><i class="fas fa-check check"></i> Conciliaciones mensuales</li>
                    <li><i class="fas fa-check check"></i> Estados financieros</li>
                    <li><i class="fas fa-check check"></i> Declaraci√≥n PDT</li>
                </ul>
            </div>

            <div class="card">
                <div class="icon"><i class="fas fa-file-invoice-dollar"></i></div>
                <h3>Impuestos y Declaraciones</h3>
                <p>Asesor√≠a fiscal especializada y preparaci√≥n de todas sus declaraciones tributarias ante SUNAT.</p>
                <ul class="service-list">
                    <li><i class="fas fa-check check"></i> Declaraci√≥n de renta</li>
                    <li><i class="fas fa-check check"></i> IGV e ISC</li>
                    <li><i class="fas fa-check check"></i> Retenciones</li>
                    <li><i class="fas fa-check check"></i> PDT 621, 633, 617</li>
                </ul>
            </div>

            <div class="card">
                <div class="icon"><i class="fas fa-chart-pie"></i></div>
                <h3>Asesor√≠a Financiera</h3>
                <p>An√°lisis financiero estrat√©gico y planificaci√≥n para el crecimiento de su negocio en el mercado peruano.</p>
                <ul class="service-list">
                    <li><i class="fas fa-check check"></i> An√°lisis de rentabilidad</li>
                    <li><i class="fas fa-check check"></i> Presupuestos</li>
                    <li><i class="fas fa-check check"></i> Proyecciones financieras</li>
                    <li><i class="fas fa-check check"></i> Evaluaci√≥n de inversiones</li>
                </ul>
            </div>

        </div>
    </div>

    <div id="contacto">
        <div class="container">
            <div class="title">
                <h2>Cont√°ctanos</h2>
                <p>D√©janos tus datos, te responderemos hoy mismo.</p>
            </div>
            <div class="form-box">
                <form id="miForm" onsubmit="enviar(event)">
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" id="nombre" required placeholder="Tu nombre completo">
                    </div>
                    <div class="form-group">
                        <label>Correo:</label>
                        <input type="email" id="email" required placeholder="tu@correo.com">
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono:</label>
                        <input type="tel" id="telefono" placeholder="999 000 000">
                    </div>
                    <div class="form-group">
                        <label>Mensaje:</label>
                        <textarea id="mensaje" rows="4" required placeholder="Escribe tu mensaje..."></textarea>
                    </div>
                    <button type="submit" class="btn-send" id="btn">ENVIAR AHORA</button>
                    <p id="status" style="text-align: center; margin-top: 15px; font-weight: bold;"></p>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <p>¬© 2026 Consultor√≠a CPRO - Lima, Per√∫</p>
    </footer>

    <div class="chat-btn" onclick="toggleChat()"><i class="fas fa-comment"></i></div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-head">
            <span>Asistente CPRO</span>
            <span onclick="toggleChat()" style="cursor:pointer">X</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="msg bot">¬°Hola! üëã Soy el asistente virtual. ¬øQuieres saber nuestros precios o servicios?</div>
        </div>
        <div class="chat-foot">
            <input type="text" id="userInput" placeholder="Escribe aqu√≠..." onkeypress="handleEnter(event)">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN EXACTA (Usando la llave correcta)
        const supabaseUrl = 'https://zmpshzskqrkqjohdqliz.supabase.co';
        const supabaseKey = 'sb_publishable_S-o2vtqOhOkKhgH318MaEQ_Ynh9mOdd';
        const cliente = supabase.createClient(supabaseUrl, supabaseKey);

        // FUNCI√ìN DE ENV√çO
        async function enviar(e) {
            e.preventDefault();
            const btn = document.getElementById('btn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.innerText = "Enviando...";
            status.innerText = "";

            const datos = {
                nombre: document.getElementById('nombre').value,
                email: document.getElementById('email').value,
                telefono: document.getElementById('telefono').value,
                mensaje: document.getElementById('mensaje').value
            };

            // INTENTO 1: Enviar a 'contactos' (min√∫scula)
            let { error } = await cliente.from('contactos').insert([datos]);

            if (error) {
                // Si falla, intentamos con may√∫scula
                console.log("Reintentando con may√∫scula...");
                const intento2 = await cliente.from('CONTACTOS').insert([datos]);
                error = intento2.error;
            }

            if (error) {
                status.style.color = 'red';
                status.innerText = "Error: " + error.message;
                btn.disabled = false;
                btn.innerText = "Reintentar";
            } else {
                status.style.color = 'green';
                status.innerText = "‚úÖ ¬°ENVIADO CON √âXITO!";
                document.getElementById('miForm').reset();
                btn.innerText = "ENVIADO";
                setTimeout(() => { btn.disabled = false; btn.innerText = "ENVIAR AHORA"; }, 3000);
            }
        }

        // L√ìGICA DEL CHATBOT
        function toggleChat() {
            const chat = document.getElementById('chatWindow');
            chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex';
        }
        function handleEnter(e) { if(e.key === 'Enter') sendMessage(); }
        
        function sendMessage() {
            const input = document.getElementById('userInput');
            const txt = input.value.toLowerCase().trim();
            if(!txt) return;

            addMsg(input.value, 'user');
            input.value = '';

            setTimeout(() => {
                let resp = "Para una atenci√≥n personalizada, escr√≠benos al WhatsApp +51 981 140 470.";
                if(txt.includes('precio') || txt.includes('costo')) resp = "Nuestros planes contables inician desde **S/ 350 al mes**.";
                if(txt.includes('servicio') || txt.includes('hacen')) resp = "Ofrecemos Contabilidad General, Asesor√≠a Tributaria y Financiera.";
                if(txt.includes('hola')) resp = "¬°Hola! ¬øEn qu√© te puedo ayudar hoy?";
                addMsg(resp, 'bot');
            }, 600);
        }
        function addMsg(txt, type) {
            const body = document.getElementById('chatBody');
            body.innerHTML += `<div class="msg ${type}">${txt}</div>`;
            body.scrollTop = body.scrollHeight;
        }
    </script>
</body>
</html>
