<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultor√≠a CPRO | Expertos Contables</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        /* --- ESTILOS GENERALES --- */
        :root { 
            --primary: #1e3a8a; /* Azul Oscuro */
            --secondary: #2563eb; /* Azul Brillante */
            --accent: #f59e0b; /* Naranja/Dorado para detalles */
            --dark: #111827; 
            --light: #f3f4f6; 
        }
        body { font-family: 'Poppins', sans-serif; margin: 0; padding: 0; color: var(--dark); background: white; scroll-behavior: smooth; }

        /* HEADER */
        header { background: #111827; padding: 15px 0; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .nav-box { max-width: 1200px; margin: auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .logo { color: white; font-size: 1.6rem; font-weight: 700; display: flex; align-items: center; gap: 10px; letter-spacing: 1px; }
        nav ul { list-style: none; display: flex; gap: 25px; padding: 0; margin: 0; }
        nav a { color: #e5e7eb; text-decoration: none; font-weight: 500; transition: 0.3s; font-size: 0.95rem; }
        nav a:hover { color: var(--secondary); }

        /* PORTADA (HERO) */
        .hero { text-align: center; padding: 120px 20px; background: linear-gradient(135deg, #eff6ff 0%, #ffffff 100%); }
        .hero h1 { font-size: 3.5rem; color: var(--primary); margin: 0 0 20px 0; line-height: 1.2; }
        .hero p { font-size: 1.3rem; color: #555; max-width: 750px; margin: 0 auto 40px auto; }
        .btn-cta { background: var(--secondary); color: white; padding: 18px 45px; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1.1rem; box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4); transition: 0.3s; display: inline-block;}
        .btn-cta:hover { background: #1e40af; transform: translateY(-3px); box-shadow: 0 15px 30px rgba(37, 99, 235, 0.5); }

        /* ESTAD√çSTICAS (NUEVO) */
        .stats-bar { background: var(--primary); padding: 50px 0; color: white; text-align: center; }
        .stats-grid { max-width: 1200px; margin: auto; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px; }
        .stat-item h3 { font-size: 2.5rem; margin: 0; color: var(--accent); }
        .stat-item p { margin: 5px 0 0; font-size: 1rem; opacity: 0.9; }

        /* SECCIONES COMUNES */
        .container { max-width: 1200px; margin: auto; padding: 100px 20px; }
        .title { text-align: center; margin-bottom: 60px; }
        .title h2 { font-size: 2.5rem; color: var(--primary); margin-bottom: 15px; margin-top: 0; position: relative; display: inline-block; }
        .title h2::after { content: ''; display: block; width: 60px; height: 4px; background: var(--secondary); margin: 10px auto 0; border-radius: 2px; }
        .title p { color: #666; font-size: 1.1rem; }

        /* SERVICIOS MEJORADOS */
        .grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; }
        .card { background: white; padding: 40px; border-radius: 20px; width: 320px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: left; border: 1px solid #f0f0f0; transition: 0.3s; position: relative; overflow: hidden; }
        .card:hover { transform: translateY(-10px); border-color: var(--secondary); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: var(--secondary); transform: scaleX(0); transition: 0.3s; transform-origin: left; }
        .card:hover::before { transform: scaleX(1); }
        
        .icon { width: 70px; height: 70px; background: #eff6ff; color: var(--secondary); border-radius: 15px; display: flex; justify-content: center; align-items: center; font-size: 1.8rem; margin-bottom: 25px; }
        .card h3 { color: var(--primary); margin-bottom: 15px; font-size: 1.5rem; font-weight: 600; }
        .card p { color: #666; font-size: 0.95rem; line-height: 1.6; margin-bottom: 25px; }
        
        .service-list { list-style: none; padding: 0; margin: 0 0 25px 0; }
        .service-list li { margin-bottom: 10px; font-size: 0.9rem; color: #444; display: flex; align-items: center; gap: 10px; }
        .check { color: #10b981; font-weight: bold; background: #d1fae5; padding: 3px; border-radius: 50%; font-size: 0.7rem; }
        
        .card-btn { color: var(--secondary); text-decoration: none; font-weight: bold; font-size: 0.95rem; display: flex; align-items: center; gap: 5px; transition: 0.3s; }
        .card-btn:hover { gap: 10px; color: var(--primary); }

        /* TESTIMONIOS (NUEVO) */
        #testimonios { background-color: #f9fafb; }
        .testimonial-card { background: white; padding: 30px; border-radius: 15px; width: 300px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); border-left: 5px solid var(--accent); }
        .stars { color: var(--accent); margin-bottom: 15px; font-size: 1.1rem; }
        .quote { font-style: italic; color: #555; margin-bottom: 20px; line-height: 1.6; font-size: 0.95rem; }
        .client-profile { display: flex; align-items: center; gap: 15px; }
        .client-img { width: 50px; height: 50px; border-radius: 50%; background: #ddd; object-fit: cover; }
        .client-info h4 { margin: 0; font-size: 1rem; color: var(--primary); }
        .client-info span { font-size: 0.85rem; color: #888; }

        /* CONTACTO */
        .form-box { max-width: 600px; margin: auto; background: white; padding: 50px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 20px; text-align: left; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 0.95rem; }
        input, textarea { width: 100%; padding: 15px; border: 1px solid #e5e7eb; border-radius: 10px; box-sizing: border-box; font-family: inherit; background: #f9fafb; transition: 0.3s; }
        input:focus, textarea:focus { border-color: var(--secondary); background: white; outline: none; }
        .btn-send { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-send:hover { background: #1e40af; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(30, 58, 138, 0.3); }

        /* FOOTER */
        footer { background: #111827; color: #9ca3af; text-align: center; padding: 50px 20px; border-top: 1px solid #1f2937; }
        
        /* CHATBOT */
        .chat-btn { position: fixed; bottom: 30px; right: 30px; width: 65px; height: 65px; background: #25D366; color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 32px; cursor: pointer; box-shadow: 0 5px 25px rgba(37, 211, 102, 0.4); z-index: 999; transition: 0.3s; }
        .chat-btn:hover { transform: scale(1.1); }
        .chat-window { display: none; position: fixed; bottom: 110px; right: 30px; width: 340px; height: 450px; background: white; box-shadow: 0 10px 40px rgba(0,0,0,0.2); border-radius: 20px; flex-direction: column; overflow: hidden; z-index: 999; animation: slideUp 0.3s ease; }
        .chat-head { background: var(--primary); color: white; padding: 20px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .chat-body { flex: 1; padding: 20px; background: #f0f2f5; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
        .chat-foot { padding: 15px; background: white; display: flex; gap: 10px; border-top: 1px solid #eee; }
        .chat-foot input { flex: 1; padding: 10px 15px; border: 1px solid #ddd; border-radius: 30px; outline: none; background: #f9fafb; }
        .chat-foot button { border: none; background: var(--secondary); color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; }
        
        .msg { padding: 10px 15px; border-radius: 15px; font-size: 0.9rem; max-width: 85%; line-height: 1.4; }
        .bot { background: white; align-self: flex-start; border-bottom-left-radius: 2px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .user { background: var(--secondary); color: white; align-self: flex-end; border-bottom-right-radius: 2px; box-shadow: 0 2px 5px rgba(37, 99, 235, 0.3); }
        
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .nav-box { flex-direction: column; gap: 15px; }
            .stats-grid { gap: 40px; }
            .chat-window { width: 90%; right: 5%; bottom: 100px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="nav-box">
            <div class="logo"><i class="fas fa-chart-line"></i> &nbsp;CPRO</div>
            <nav>
                <ul>
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#servicios">Servicios</a></li>
                    <li><a href="#testimonios">Clientes</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="hero" id="inicio">
        <h1>Tu Socio Estrat√©gico en<br>Finanzas y Contabilidad</h1>
        <p>Expertos en soluciones integrales: ERP, Auditor√≠a y Cumplimiento Tributario para empresas que buscan crecer en Per√∫.</p>
        <a href="#contacto" class="btn-cta">Solicitar Asesor√≠a Gratis</a>
    </div>

    <div class="stats-bar">
        <div class="stats-grid">
            <div class="stat-item">
                <h3>+150</h3>
                <p>Clientes Satisfechos</p>
            </div>
            <div class="stat-item">
                <h3>+10</h3>
                <p>A√±os de Experiencia</p>
            </div>
            <div class="stat-item">
                <h3>100%</h3>
                <p>Cumplimiento SUNAT</p>
            </div>
            <div class="stat-item">
                <h3>S/ 5M</h3>
                <p>Ahorro Generado</p>
            </div>
        </div>
    </div>

    <div class="container" id="servicios">
        <div class="title">
            <h2>Nuestros Servicios</h2>
            <p>Soluciones dise√±adas para impulsar la rentabilidad de tu negocio</p>
        </div>
        <div class="grid">
            
            <div class="card">
                <div class="icon"><i class="fas fa-calculator"></i></div>
                <h3>Contabilidad General</h3>
                <p>Llevamos tus libros contables al d√≠a, garantizando el orden y la transparencia financiera que tu empresa necesita.</p>
                <ul class="service-list">
                    <li><i class="fas fa-check check"></i> Libros electr√≥nicos (PLE)</li>
                    <li><i class="fas fa-check check"></i> Estados Financieros NIIF</li>
                    <li><i class="fas fa-check check"></i> Conciliaci√≥n Bancaria</li>
                    <li><i class="fas fa-check check"></i> Emisi√≥n de Facturas</li>
                </ul>
                <a href="#contacto" class="card-btn">Solicitar Cotizaci√≥n <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="card">
                <div class="icon"><i class="fas fa-file-invoice-dollar"></i></div>
                <h3>Impuestos y SUNAT</h3>
                <p>Evita multas y contingencias. Nos encargamos de todas tus declaraciones tributarias mensuales y anuales.</p>
                <ul class="service-list">
                    <li><i class="fas fa-check check"></i> Declaraci√≥n PDT 621</li>
                    <li><i class="fas fa-check check"></i> Declaraci√≥n de Renta Anual</li>
                    <li><i class="fas fa-check check"></i> Fraccionamientos y Devoluciones</li>
                    <li><i class="fas fa-check check"></i> Asesor√≠a Fiscal Preventiva</li>
                </ul>
                <a href="#contacto" class="card-btn">Solicitar Cotizaci√≥n <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="card">
                <div class="icon"><i class="fas fa-chart-line"></i></div>
                <h3>Asesor√≠a Financiera</h3>
                <p>Transformamos tus datos en estrategias. Planificaci√≥n financiera para asegurar el crecimiento sostenible.</p>
                <ul class="service-list">
                    <li><i class="fas fa-check check"></i> Flujo de Caja Proyectado</li>
                    <li><i class="fas fa-check check"></i> Evaluaci√≥n de Inversiones</li>
                    <li><i class="fas fa-check check"></i> Control de Costos</li>
                    <li><i class="fas fa-check check"></i> Implementaci√≥n de ERP</li>
                </ul>
                <a href="#contacto" class="card-btn">Solicitar Cotizaci√≥n <i class="fas fa-arrow-right"></i></a>
            </div>

        </div>
    </div>

    <div id="testimonios">
        <div class="container">
            <div class="title">
                <h2>Lo que dicen nuestros clientes</h2>
                <p>Empresas reales que conf√≠an en CPRO</p>
            </div>
            <div class="grid">
                
                <div class="testimonial-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="quote">"Gracias a CPRO logramos recuperar un saldo a favor de SUNAT que d√°bamos por perdido. Su gesti√≥n es impecable y muy r√°pida."</p>
                    <div class="client-profile">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Cliente" class="client-img">
                        <div class="client-info">
                            <h4>Jorge Mendez</h4>
                            <span>Gerente General, Importadora JM</span>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="quote">"La implementaci√≥n del sistema contable fue un √©xito. Ahora tengo control total de mis inventarios y facturaci√≥n desde el celular."</p>
                    <div class="client-profile">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Cliente" class="client-img">
                        <div class="client-info">
                            <h4>Ana Torres</h4>
                            <span>Due√±a, Boutique Moda</span>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="quote">"Excelente servicio de asesor√≠a. Me ayudaron a constituir mi empresa y elegir el r√©gimen tributario que m√°s me conven√≠a."</p>
                    <div class="client-profile">
                        <img src="https://randomuser.me/api/portraits/men/85.jpg" alt="Cliente" class="client-img">
                        <div class="client-info">
                            <h4>Roberto Castillo</h4>
                            <span>Fundador, TechSolutions</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="contacto">
        <div class="container">
            <div class="title">
                <h2>Cont√°ctanos</h2>
                <p>D√©janos tus datos y un asesor se comunicar√° contigo en menos de 24 horas.</p>
            </div>
            <div class="form-box">
                <form id="miForm" onsubmit="enviar(event)">
                    <div class="form-group">
                        <label>Nombre Completo:</label>
                        <input type="text" id="nombre" required placeholder="Ej. Juan P√©rez">
                    </div>
                    <div class="form-group">
                        <label>Correo Electr√≥nico:</label>
                        <input type="email" id="email" required placeholder="ejemplo@correo.com">
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono / WhatsApp:</label>
                        <input type="tel" id="telefono" placeholder="999 000 000">
                    </div>
                    <div class="form-group">
                        <label>¬øEn qu√© podemos ayudarte?</label>
                        <textarea id="mensaje" rows="4" required placeholder="Necesito ayuda con mi declaraci√≥n mensual..."></textarea>
                    </div>
                    <button type="submit" class="btn-send" id="btn">ENVIAR CONSULTA</button>
                    <p id="status" style="text-align: center; margin-top: 15px; font-weight: bold;"></p>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <p>¬© 2026 Consultor√≠a CPRO - Lima, Per√∫</p>
        <p style="font-size: 0.9rem; color: #6b7280; margin-top:10px;">Expertos en crecimiento empresarial y tranquilidad fiscal.</p>
    </footer>

    <div class="chat-btn" onclick="toggleChat()"><i class="fas fa-comment-dots"></i></div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-head">
            <span>Soporte CPRO</span>
            <span onclick="toggleChat()" style="cursor:pointer"><i class="fas fa-times"></i></span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="msg bot">¬°Hola! üëã Bienvenido a CPRO. ¬øEst√°s buscando asesor√≠a contable o financiera?</div>
        </div>
        <div class="chat-foot">
            <input type="text" id="userInput" placeholder="Escribe aqu√≠..." onkeypress="handleEnter(event)">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN EXACTA (Usando la llave correcta)
        const supabaseUrl = 'https://zmpshzskqrkqjohdqliz.supabase.co';
        const supabaseKey = 'sb_publishable_S-o2vtqOhOkKhgH318MaEQ_Ynh9mOdd';
        const cliente = supabase.createClient(supabaseUrl, supabaseKey);

        // FUNCI√ìN DE ENV√çO
        async function enviar(e) {
            e.preventDefault();
            const btn = document.getElementById('btn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.innerText = "Enviando...";
            status.innerText = "";

            const datos = {
                nombre: document.getElementById('nombre').value,
                email: document.getElementById('email').value,
                telefono: document.getElementById('telefono').value,
                mensaje: document.getElementById('mensaje').value
            };

            // INTENTO 1: Enviar a 'contactos' (min√∫scula)
            let { error } = await cliente.from('contactos').insert([datos]);

            if (error) {
                // Si falla, intentamos con may√∫scula
                console.log("Reintentando con may√∫scula...");
                const intento2 = await cliente.from('CONTACTOS').insert([datos]);
                error = intento2.error;
            }

            if (error) {
                status.style.color = 'red';
                status.innerText = "Error: " + error.message;
                btn.disabled = false;
                btn.innerText = "Reintentar";
            } else {
                status.style.color = 'green';
                status.innerText = "‚úÖ ¬°ENVIADO CON √âXITO!";
                document.getElementById('miForm').reset();
                btn.innerText = "ENVIADO";
                setTimeout(() => { btn.disabled = false; btn.innerText = "ENVIAR CONSULTA"; }, 3000);
            }
        }

        // L√ìGICA DEL CHATBOT
        function toggleChat() {
            const chat = document.getElementById('chatWindow');
            chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex';
        }
        function handleEnter(e) { if(e.key === 'Enter') sendMessage(); }
        
        function sendMessage() {
            const input = document.getElementById('userInput');
            const txt = input.value.toLowerCase().trim();
            if(!txt) return;

            addMsg(input.value, 'user');
            input.value = '';

            setTimeout(() => {
                let resp = "Para una atenci√≥n personalizada, escr√≠benos al WhatsApp +51 981 140 470.";
                if(txt.includes('precio') || txt.includes('costo')) resp = "Nuestros planes contables inician desde **S/ 350 al mes**.";
                if(txt.includes('servicio') || txt.includes('hacen')) resp = "Ofrecemos Contabilidad General, Asesor√≠a Tributaria y Financiera.";
                if(txt.includes('hola')) resp = "¬°Hola! ¬øEn qu√© te puedo ayudar hoy?";
                addMsg(resp, 'bot');
            }, 600);
        }
        function addMsg(txt, type) {
            const body = document.getElementById('chatBody');
            body.innerHTML += `<div class="msg ${type}">${txt}</div>`;
            body.scrollTop = body.scrollHeight;
        }
    </script>
</body>
</html>
// Funci√≥n para hablar con n8n
async function enviarMensajeAn8n(textoUsuario) {
    
    // 1. Aqu√≠ pegas la URL que copiaste del Webhook de n8n
    const urlN8n = "PEGA_AQUI_TU_WEBHOOK_URL"; 

    try {
        // 2. Preparamos el paquete para enviar
        const respuesta = await fetch(urlN8n, {
            method: "POST", // M√©todo de env√≠o
            headers: {
                "Content-Type": "application/json" // Decimos que enviamos datos JSON
            },
            // 3. Empaquetamos el mensaje del usuario
            body: JSON.stringify({
                mensaje: textoUsuario 
            })
        });

        // 4. Esperamos la respuesta de n8n
        const datos = await respuesta.json();
        
        // 5. Devolvemos lo que n8n nos contest√≥
        return datos.respuesta; 

    } catch (error) {
        console.error("Error conectando con n8n:", error);
        return "Hubo un error al conectar con el servidor.";
    }
}
